
     const handlePortfolioSubmit = async (form) => {
       try {
         setMessage(<>Generating your ePortfolio...</>);
         setCountdown(3);

         const formData = new FormData();
         formData.append('name', form.name || 'Test User');
         formData.append('profession', form.profession || 'Developer');
         formData.append('tagline', form.tagline || '');
         formData.append('summary', form.summary || '');
         formData.append('about', form.about || '');
         formData.append('user_email', form.user_email || 'example@email.com');
         formData.append('linkedin', form.linkedin || '');
         formData.append('phone', form.phone || '');
         formData.append('skills', JSON.stringify(form.skills || ['JavaScript', 'React', 'CSS', 'HTML']));
         formData.append('skillProficiencies', JSON.stringify(form.skillProficiencies || [80, 70, 60, 50]));
         formData.append('projects', JSON.stringify(form.projects || [
           { title: 'Project 1', description: 'Test project', category: 'Web' },
           { title: 'Project 2', description: 'Another test', category: 'App' }
         ]));
         formData.append('template', form.template || 'default');
         if (form.cv) formData.append('cv', form.cv);
         if (form.image) formData.append('image', form.image);

         const apiUrl = '/api/generate';
         const response = await fetch(apiUrl, {
           method: 'POST',
           body: formData,
         });

         if (!response.ok) {
           const errorText = await response.text();
           throw new Error(`HTTP error! Status: ${response.status}, Message: ${errorText}`);
         }

         const data = await response.json();
         setMessage(<>Success! Your ePortfolio is live at: <a href={data.url} target="_blank" className="text-blue-600 underline">{data.url}</a></>);
         setCountdown(null);
       } catch (error) {
         console.error('Portfolio submission error:', error);
         setMessage(<>Error: Unable to connect to the server. <span>Please check your connection and try again. Error: {error.message}</span></>);
         setCountdown(null);
       }
     };
     
